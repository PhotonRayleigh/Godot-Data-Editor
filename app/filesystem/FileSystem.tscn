[gd_scene load_steps=4 format=2]

[ext_resource path="res://app/filesystem/FileSystem.cs" type="Script" id=1]

[sub_resource type="StyleBoxEmpty" id=1]

[sub_resource type="GDScript" id=2]
script/source = "extends PopupMenu

var InputCatcher : Panel
var FileSystemScroll : ScrollContainer

# Called when the node enters the scene tree for the first time.
func _ready():
	InputCatcher = owner.get_node(\"InputCatcher\")
	FileSystemScroll = owner.get_node(\"FileSystemScroll\")

func _on_ContextMenu_focus_exited():
	hide()

func _on_ContextMenu_visibility_changed():
	if visible == true:
		InputCatcher.rect_size = FileSystemScroll.rect_size
		InputCatcher.rect_global_position = FileSystemScroll.rect_global_position
		InputCatcher.show()
	elif visible == false:
		InputCatcher.hide()
	
"

[node name="FileSystem" type="Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 5.0
margin_top = 30.0
margin_right = -5.0
margin_bottom = -5.0
script = ExtResource( 1 )
__meta__ = {
"_edit_use_anchors_": false,
"_editor_description_": "A Control Node that displays a folder directory and displays it in a Tree Node."
}

[node name="HBoxContainer" type="HBoxContainer" parent="."]
anchor_right = 1.0
margin_bottom = 33.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="FilePath" type="LineEdit" parent="HBoxContainer"]
margin_right = 940.0
margin_bottom = 33.0
size_flags_horizontal = 3
text = "user://"
editable = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="RefreshButton" type="Button" parent="HBoxContainer"]
margin_left = 944.0
margin_right = 1014.0
margin_bottom = 33.0
text = "Refresh"

[node name="FileSystemScroll" type="ScrollContainer" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 33.0
margin_right = -0.000183105
margin_bottom = -0.000183105
__meta__ = {
"_edit_use_anchors_": false
}

[node name="FileSystemList" type="Tree" parent="FileSystemScroll"]
margin_right = 1014.0
margin_bottom = 532.0
size_flags_horizontal = 3
size_flags_vertical = 3
allow_rmb_select = true
select_mode = 2
__meta__ = {
"_edit_use_anchors_": true
}

[node name="InputCatcher" type="Panel" parent="."]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
focus_mode = 2
custom_styles/panel = SubResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ContextMenu" type="PopupMenu" parent="."]
margin_right = 16.0
margin_bottom = 16.0
items = [ "Rename", null, 0, false, false, 0, 0, null, "", false, "New File", null, 0, false, false, 1, 0, null, "", false, "New Folder", null, 0, false, false, 2, 0, null, "", false, "Delete Selection", null, 0, false, false, 3, 0, null, "", false ]
script = SubResource( 2 )
[connection signal="pressed" from="HBoxContainer/RefreshButton" to="." method="_OnRefreshButtonPressed"]
[connection signal="gui_input" from="FileSystemScroll/FileSystemList" to="." method="_OnFileSystemListGuiInput"]
[connection signal="item_collapsed" from="FileSystemScroll/FileSystemList" to="." method="_OnFileSystemListItemCollapsed"]
[connection signal="focus_exited" from="ContextMenu" to="ContextMenu" method="_on_ContextMenu_focus_exited"]
[connection signal="popup_hide" from="ContextMenu" to="." method="_OnContextMenuPopupHide"]
[connection signal="visibility_changed" from="ContextMenu" to="ContextMenu" method="_on_ContextMenu_visibility_changed"]
